# ----------------------------------------------------------
# Kernel stage
# ----------------------------------------------------------

FROM alpine:edge as kernel

# Add packages
RUN apk --no-cache add cpio

# Download dCore-focal64
ADD http://www.tinycorelinux.net/dCore/x86_64/release/dCore-focal64/vmlinuz-focal64 /boot/vmlinuz
ADD http://www.tinycorelinux.net/dCore/x86_64/release/dCore-focal64/dCore-focal64.gz /core/dcore.gz

# Unpack and move modules
RUN cd /core && gzip -d dcore.gz && cpio -idv < dcore && mv lib/modules /lib/modules